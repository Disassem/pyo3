{% meta %}
    tags: [ide, idle, tools, subjective, reviews]
    title: Pythonic IDEs: Субъективный взгляд на IDLE
{% endmeta %}

{% mark body %}
<p>Со времени написания <a href="http://www.pyobject.ru/blog/post/pythonic-ides/">прошлой заметки</a> прошло более трех месяцев. Всё это время я пользовался <a href="http://www.python.org/idle/">IDLE</a>. О своих впечатлениях и расскажу
</p>
<p>
<!--more-->

   IDLE хороша тем, что доступна практически везде и без дополнительных усилий. Написана она на Tkinter и к ней приложил руку <a href="http://www.artima.com/weblogs/index.jsp?blogger=guido">ГвР</a>. Про Tk я слышал мнение, что он одинаково плохо выглядит на всех платформах. На самом деле, просто другие toolkit'ы стали выглядеть лучше, а Tk какой был, такой и остался. И вот в сравнении с &quot;глянцевыми&quot; GTK/Qt он выглядит &quot;серым&quot;. В любом случае, с внешним видом можно мириться, если функциональность на высоте.

</p>
<p>Насчет функциональности небольшое отступление. Что нужно для того, чтобы IDE/редактор мог называться Pythonic? По-порядку:
</p>
<ol>
 <li>
     Уметь работать с отступами. Поскольку отступы - часть синтаксиса, то редактор просто обязан уметь: делать &quot;правильные&quot; отступы (по <a href="http://www.python.org/doc/essays/styleguide.html">Python Style Guide</a> это 4 пробела) и изменять уровень вложенности у блока текста.
 </li>

 <li>

     Уметь подсвечивать синтаксис. Не требую чего-то навороченного, хотя бы базовые возможности (выделение ключевых слов, строк, комментариев).
 </li>

 <li>
     Уметь работать с встроенной документацией (docstring). Иначе странно было бы называть инструмент предназначенным для работы с Python, если игнорируется такая мощная встроенная в язык функция.
 </li>

 <li>
     Уметь определять кодировку текста. Раз уж указывается кодировка исходного текста (<a href="http://www.python.org/peps/pep-0263.html">PEP-263</a>), то грех не брать ее из файла.
 </li>

</ol>
<p>На мой взгляд, это необходимые условия. Различного рода дополнительная функциональность (автодополнение названий функций/классов/методов/атрибутов/переменных, интеграция с системой контроля версий, интеграция с инструментами тестирования/рефакторинга) рассматривается мной как факультативная. Т.е. если она есть - хорошо, но в этом случае смотрю как она реализована, насколько удобно. Если же этих &quot;фишек&quot; нет, то и в минус записывать не буду.
</p>
<p>Итак, &quot;карточка&quot; на IDLE:
</p>
<ul>
 <li>
     Лицензия - <a href="http://www.python.org/psf/license/">PSFL v2</a>

 </li>

 <li>
     Требуемые дополнительные библиотеки - <a href="http://www.tcl.tk/">Tk</a> (поправка: для Windows включена в дистрибутив Python)
 </li>

 <li>
     Базовый функционал - полностью
 </li>

 <li>
     Дополнительный функционал <ul>
 <li>
     автодополнение названий переменных (в версии 1.2)
 </li>

 <li>
     обзор классов/функций
 </li>

 <li>
     обзор директорий, в которых ищутся модули
 </li>

 <li>
     контекст кода (показ ключевых конструкций выше по коду) 
 </li>

 <li>
     наличие отладчика
 </li>

</ul>

 </li>
</ul>
<p>Из дополнительных &quot;фишек&quot; отмечу хороший алгоритм переноса данных внутри скобок: курсор переносится не на начало строки, а на позицию под открывающей скобкой. Понравилось еще, что IDLE &quot;понимает&quot;, что после <code>return</code> нужно возвращаться на один уровень вверх по вложенности. Из того что появилось в версии 1.2 и достаточно удобно - визуальный показ парности скобок. Всё это не killer features, но по-мелочи приятно.
</p>
<p>Что касается общего впечатления: сразу стоит предупредить, что в ненастроенной *nix системе его могут испортить шрифты, поскольку зачастую в Tk они по умолчанию &quot;кривоваты&quot; (это касается, естественно, только кириллицы). В целом, у меня сложилось мнение, что IDLE не очень подходит к крупным проектам. Я не знаю, с чем это связано, но субъективно мне сложнее ориентироваться по коду внутри IDLE (и Class Browser тут скорее просто для галочки, реальной помощи от него я не ощутил), чем в большинстве других редакторов.  По мне, так ниша IDLE - небольшие Python-программы, где код умещается на два-три экрана (т.е. где-то в районе 200 строк). Как уже сказал, навигация по более объемному коду вызывает некоторый дискомфорт.

</p>
<p>Из недостатков, которые мне мешали, помню:
</p>
<ul>
 <li>
     Постоянное попадание скрытых файлов/директорий в диалоге &quot;Открыть/Сохранить файл&quot;. С учетом того, что у меня в домашней директории их под 200 штук, это утомляло
 </li>

 <li>
     Изредка, при запуске &quot;долгоиграющих&quot; процессов (например, twisted-приложений, или GUI), IDLE &quot;замораживалась&quot; (см. <a href="http://gorod-omsk.ru/blog/pythy/files/2006/10/idle-freeze.png">скриншот</a>). При этом на Windows я с этим сталкивался чаще, чем на Linux.
 </li>

</ul>
<p>В целом, для &quot;IDE в поставке&quot;, IDLE не плоха. Не &quot;лучший выбор&quot;, но твердая четвертка. По крайней мере, весь базовый функционал реализован вполне достойно. Я буду рассматривать IDLE как некий эталон (надо ж от чего-то отталкиваться) и остальные инструменты буду сравнивать уже с ней.
</p>
<blockquote><p>Вообще, это время я помимо IDLE, использовал <a href="http://pydev.sourceforge.net/">PyDev</a> на Windows и <a href="http://www.vim.org/">gvim</a> на Linux, и пришел к выводу, что искать лучший (для себя) инструмент на все случаи жизни не особо разумно. Так что поиск разделился на две категории: 
</p>
<ol>
 <li>
     быстрый инструмент для мелких скриптов:
 </li>

 <li>
     полный инструмент для крупных проектов:
 </li>
</ol>
</blockquote>
<p><em>Дальше совет тем, кто хочет использовать IDLE-1.2 (появилась в Py25) вместе с Py24. </em>
</p>
<p>Во-первых, нужно получить исходные тексты IDLE-1.2 с репозитария Python (я делаю это в Linux, в командной строке, Вы можете воспользоваться каким-нибудь <a href="http://subversion.tigris.org/links.html#clients">Subversion-клиентом</a>)
</p>
<pre><code>svn checkout http://svn.python.org/projects/python/branches/release25-maint/Lib/idlelib idlelib12

</code></pre><p>Чтобы не &quot;ломать&quot; инсталляцию Python, а также для возможности использовать предыдущую версию IDLE (если что-то пойдет не так), я ставлю IDLE-1.2 как пакет <code>idlelib12</code>, а не <code>idlelib</code>.
</p>
<p>Далее, исходя из требований (запускаться на Py24, запускаться как пакет <code>idlelib12</code>), пришлось немного доработать IDLE. Патч можно посмотреть <a href="http://pythy.googlecode.com/svn/trunk/idle/idle-py24.patch">здесь</a>, а <a href="http://pythy.googlecode.com/svn/trunk/idle/idle-12-py24.zip">здесь</a> можно взять уже измененные исходные тексты IDLE-1.2.

</p>
<p>Потом копируем &quot;доработанную&quot; IDLE в директорию, находящуюся в <code>PYTHONPATH</code> (либо добавляем нужную директорию к <code>PYTHONPATH</code>), я для этого использую <code>/usr/local/lib/python2.4/site-packages</code> и запускаем при помощи такого кода:
</p>
<pre><code>#!/usr/bin/python
from idlelib12 import PyShell
PyShell.main()
</code></pre><p>Если что-то не получается, пишите <a href="http://www.pyobject.ru/blog/post/pythonic-ides-a-subjective-glance-at-idle#comment">комментарии</a> - будем разбираться вместе.

</p>
{% endmark %}
