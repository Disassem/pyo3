{% meta %}
    tags: [nevow, reviews]
    title: Выбор веб-фреймворка: Nevow без прикрас
{% endmeta %}

{% mark body %}
<p>Сегодня очередь <a href="http://divmod.org/trac/wiki/DivmodNevow">Nevow</a> - веб-фреймворка, построенного поверх <a href="http://twistedmatrix.com/">Twisted</a>. Информацию о том, что представляет собой Nevow и как его использовать можете посмотреть в <a href="http://www.pyobject.ru/blog/post/intro-to-nevow/">Введении в Nevow</a>, а сегодня я рассказываю о своем впечатлении о Nevow.
</p>

<!--more-->

<h2>Что пишут</h2>
<p>Прежде чем взяться за Nevow я посмотрел, что же пишут о нем люди, уже попробовавшие его:
   Дункан МакГреггор от Nevow <a href="http://oubiwann.blogspot.com/2006/10/nevow-for-rapid-deployments.html">просто в восторге</a>:</p>
<blockquote><p>Хотя скорость разработки важна, нужно учитывать не только ее. Все говорят о том, как быстро можно развернуть проект используя веб-фреймворк X, и т.д. Но где то, что имеет б<em>о</em>льший приоритет для меня: насколько это подходит мне? Могу ли я сделать <em>всё</em> что захочу? После того, как дело сделано, могу ли добавить или убрать что-нибудь? Могу ли я сделать неожидаемые изменения быстро и просто, без ущерба целостности архитектуры?
</p>
<p>И еще: могу ли я строить <strong>свои</strong> системы с ним?</p>
<p>И вот где я в востороге от Nevow. Мне комфортно с его дизайном, шаблонами, &quot;внутренностями&quot; и свободой для программиста. [...] Nevow дает те инструменты и тот уровень комфорта, которые позволяют мне строить расширяемые системы легко и просто
</p>
</blockquote><p>На русском гораздо менее экспрессивно про Nevow <a href="http://www.google.com/search?q=cache:n_JTs_8l0_QJ:kuznetsov.mk.ua/%3Fp%3D47">сказал</a> <a href="http://kuznetsov.mk.ua/">Дмитрий Кузнецов</a>:</p>
<blockquote><p>Занялся я освоением этого замечательного инструмента. Он всем замечателен и мне нравится, кроме одного - отсутствия документации. К сожалению, python для меня еще язык новый, в процессе изучения, так сказать, поэтому по коду самого фреймворка ориентируюсь довольно плохо. Короче говоря, достаточно непростое дело получается. Это не Smarty, где когда мне понадобился универсальный pager, Google меня привел прямо к плагину для фреймворка, который полностью удовлетворил мои нужды :) . А здесь замечателен только сам фреймворк. С сервером Twisted можно творить чудеса. Плагинов и кода написанного для фреймворка - что кот наплакал. Примеры, конечно, есть, но их ооочень мало. Документация - меньше десятка туториалов да скудненький мануал. А жаль.
</p>
</blockquote>
<h2>Что думаю я</h2>
<p>Я думаю, что Nevow был конкурентноспособен до появления нового поколения веб-фреймворков: <a href="http://www.djangoproject.com/">Django</a>, <a href="http://www.turbogears.org/">TurboGears</a>, <a href="http://pylonshq.com/">Pylons</a>. Как только стали доступны эти инструменты, Nevow обречен на вымирание, как динозавр. Даже его преимущество (преимущество для меня в данной конкретной ситуации) - интеграция с Twisted - не способно перевесить недостатки. И самый главный недостаток - отсутствие внятной документации. 
</p>
<blockquote><p>Чтобы написать мое тестовое приложение, мне пришлось не только прочитать всю документацию по Nevow, просмотреть все докстринги в <code>nevow.rend</code>, изучить невнятные примеры, но и поискать Nevow-проекты при помощи <a href="http://www.google.com/codesearch">google/codesearch</a>, а также поизучать код <a href="http://code.google.com/p/prairie-wiki/">Prairie wiki</a> и <a href="http://code.google.com/p/pymon/">Pymon</a>. Для сравнения: в Django достаточно пройти один туториал и прочитать две страницы документации. И еще один момент &quot;для сравнения&quot;: на написание Nevow-проекта мне понадобилось времени в несколько раз больше, чем на Django и Pylons <strong>вместе взятых</strong>.

</p>
</blockquote><p>Далее, не просто применение, а поощрение порочной практики смешивания логики и представления. Сплошь и рядом, в документации, в примерах, используется <code>nevow.loaders.stan</code> - построение DOM HTML-документа средствами Python.
</p>
<p>Следущий момент, который заслуживает отдельного внимания, потому что я достаточно долго бился с ним. Формы. Уже во &quot;Введении в Nevow&quot; я обозначил некоторые проблемы Nevow-инструментов для обработки форм. Так вдобавок, ни <code>formless</code>, ни <code>formal</code> не имеют документации <em>вообще</em>, только примеры, причем с использованием <code>nevow.loaders.stan</code>. Но это еще не все. Обработка форм настолько <strong>кривая</strong>, что мне пришлось хачить ее для своего случая. Я не хочу особо вдаваться в подробности, лишь кратко скажу, что форма отрисовывается в фрагменте, а обрабатывается в странице, содержащей этот фрагмент. Ну и из-за абсолютно глупых ограничений, мне пришлось использовать механизм сессий, хотя в Django и Pylons я вполне успешно обошелся без них.

</p>
<p>В итоге, я думаю, что потрачу меньше времени и усилий, а сам процесс мне будет более приятен, если буду использовать Django или Pylons, пусть даже мне и придется продумывать протокол обмена Twisted-сервиса и веб-фронтенда. Сухой остаток - Nevow не мой выбор.
</p>
<p>Код тестового приложения можно взять с <a href="http://pythy.googlecode.com/svn/trunk/webframeworks/nevowex/">code.google.com</a>.
</p>
<p>P.S. Уже после того, как приложение было написано, я встретил еще пару обзоров Nevow. Все они не слишком свежие (2005г), но с того времени в Nevow особо ничего не поменялось:
</p>
<ul>
 <li>
     <a href="http://www.third-bit.com/pywebblog/archives/cat_twisted.html">Twisted category at PyWebOff</a>
 </li>

 <li>
     <a href="http://arkenstone.blogspot.com/2005/05/finding-nevow.html">Finding Nevow</a>
 </li>
</ul>
{% endmark %}
