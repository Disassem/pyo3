{% meta %}
    tags: [links, django, paste]
    title: Django-приложения без проектов
{% endmeta %}

{% mark body %}
<p>Малькольм Трединник написал <a href="http://www.pointy-stick.com/blog/2007/11/09/django-tip-developing-without-projects/">статью</a> про то, как в Django можно обойтись без проектов.</p>

<p>Во многом, положения этой статьи пересекаются с моими собственными предпочтениями: последнее время я работаю исключительно с приложениями, не с проектами. Во-первых, распространяются (в виде tarball или egg) приложения, а не проекты. Во-вторых, <a href="http://www.pyobject.ru/blog/post/the-things-i-dislike-about-django/">как я уже говорил</a>, проекты это лишняя сущность, по факту они никому не нужны.</p>

<p>Особых секретов в моем подходе нет - единственно, что я создаю приложение не средствами <code>django-admin.py</code>, а <a href="http://pythy.googlecode.com/svn/trunk/paste_django_template/">средствами PasteScript</a>: в этом случае уже всё готово и для "приложения без проекта", и для пакетизации (setup.py рядом лежит).</p>

<p>Давайте прикинем, какие действия необходимо совершить, желая создать сайт на Django через <code>django-admin.py</code>:</p>

<ul>
<li>создать проект <code>django-admin.py startproject projectname</code></li>
<li>внутри проекта создать приложение <code>python manage.py startapp appname</code></li>
<li>скопировать шаблон <code>urls.py</code> из проекта в приложение</li>
<li>в <code>settings.py</code> проекта включить приложение в <code>INSTALLED_APPS</code></li>
<li>в <code>urls.py</code> проекта подключить urlconf из приложения</li>
</ul>

<p>Вдобавок к этому, сложно придумать адекватные имена <em>и проекту, и приложению</em>, обычно либо проект получается <code>mysite</code> или типа того; либо воображения хватает только на проект, и приложение получается <code>foo.foo</code>.</p>

<p>C шаблоном приложения PasteScript всё сводится к:</p>

<ul>
<li>создать приложение <code>paster create -t django AppName</code></li>
</ul>

<p>По-хорошему, неплохо бы еще и развертывание делать через PasteDeploy, даром что Django поддерживает WSGI. Для ситуации "один сайт - одно приложение" все делается достаточно легко, и я делал такое в тестовых целях. А вот для расклада "один сайт - несколько приложений", да еще с разными настройками (например, БД) возникают сложности, связанные с концептуальными решениями Django. Так что полноценную поддержку Django в Paste сделать достаточно проблематично, а частичное решение не понятно кому нужно...</p>

<p>P.S. Уже после того, как написал пост заметил, что и Джеймс Беннетт <a href="http://www.b-list.org/weblog/2007/nov/09/projects/">высказался на тему "жизнь без проектов"</a>.</p>
{% endmark %}
